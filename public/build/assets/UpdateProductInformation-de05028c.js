import{J as q,r as _,h as C,o as i,c,b as l,a as t,u as s,d as v,v as M,l as b,F as k,f as x,w as V,T as N,j,t as U,k as D,e as I}from"./app-32a5c4fa.js";import{_ as p}from"./TextInput-9f124e2f.js";import{_ as u}from"./InputError-499f6de0.js";import{_ as d}from"./InputLabel-609d8761.js";import{P as z}from"./PrimaryButton-e8cde6a0.js";import"./_plugin-vue_export-helper-c27b6911.js";const F=l("header",null,[l("h2",{class:"text-lg font-medium text-gray-900"},"Update Product"),l("p",{class:"mt-1 text-sm text-gray-600"}," Edit the product information ")],-1),A={class:"grid grid-cols-1 gap-12 sm:grid-cols-2 mt-6"},E={class:"space-y-6"},K={class:"relative"},L={class:"bg-gray-100 mt-0.5 w-full absolute border border-gray-300 rounded overflow-y-auto max-h-32 z-50 shadow-sm"},R=["onMousedown"],J={class:"relative"},O={class:"bg-gray-100 mt-0.5 w-full absolute border border-gray-300 rounded overflow-y-auto max-h-32 z-50 shadow-sm"},G=["onMousedown"],H={class:"mt-5"},Q=["src"],W={class:"grid-cols-2 flex items-center gap-4"},X={key:0,class:"text-sm text-gray-600"},le={__name:"UpdateProductInformation",props:{product:{type:Object,required:!0}},setup(Y){let n=q().props.product;const m=_([]),g=_([]),y=_(n.image?"/storage/product_images/"+n.image:"/default/no_product_image.png");let f=null;const e=C({code:n.code,name:n.name,description:n.description,price:n.price,stock:n.stock,category_name:n.category.name,brand_name:n.brand.name,image:null}),B=r=>{e.category_name=r,m.value=[]},P=async()=>{clearTimeout(f),e.category_name.length>=2?f=setTimeout(async()=>{let r=await fetch(route("admin.categories.search",{search:e.category_name}));m.value=await r.json()},200):m.value=[]},S=r=>{e.brand_name=r,g.value=[]},T=async()=>{clearTimeout(f),e.brand_name.length>=2?f=setTimeout(async()=>{let r=await fetch(route("admin.brands.search",{search:e.brand_name}));g.value=await r.json()},200):g.value=[]},$=r=>{e.image=r.target.files[0];let o=r.target.files[0],a=new FileReader;a.onloadend=h=>{y.value=a.result},a.readAsDataURL(o)},w=r=>{const o=new Set(["1","2","3","4","5","6","7","8","9","0","."]),a=r.key;o.has(a)||r.preventDefault()};return(r,o)=>(i(),c("section",null,[F,l("form",{onSubmit:o[9]||(o[9]=j(a=>s(e).post(r.route("admin.products.update",s(n).id),{preserveScroll:!0}),["prevent"]))},[l("div",A,[l("div",E,[l("div",null,[t(d,{for:"code",value:"Code"}),t(p,{id:"code",modelValue:s(e).code,"onUpdate:modelValue":o[0]||(o[0]=a=>s(e).code=a),autocomplete:"code",autofocus:"",class:"mt-1 block w-full cursor-not-allowed bg-gray-100",maxlength:"6",required:"",disabled:"",type:"text"},null,8,["modelValue"]),t(u,{message:s(e).errors.code,class:"mt-2"},null,8,["message"])]),l("div",null,[t(d,{for:"name",value:"Name"}),t(p,{id:"name",modelValue:s(e).name,"onUpdate:modelValue":o[1]||(o[1]=a=>s(e).name=a),autocomplete:"name",autofocus:"",class:"mt-1 block w-full",required:"",type:"text"},null,8,["modelValue"]),t(u,{message:s(e).errors.name,class:"mt-2"},null,8,["message"])]),l("div",null,[t(d,{for:"description",value:"Description"}),v(l("textarea",{id:"description","onUpdate:modelValue":o[2]||(o[2]=a=>s(e).description=a),autocomplete:"description",autofocus:"",class:"mt-1 block w-full whitespace-normal resize-none h-40 border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",type:"text"},null,512),[[M,s(e).description]]),t(u,{message:s(e).errors.description,class:"mt-2"},null,8,["message"])]),l("div",K,[t(d,{for:"category_name",value:"Category"}),t(p,{id:"category_name",modelValue:s(e).category_name,"onUpdate:modelValue":o[3]||(o[3]=a=>s(e).category_name=a),onkeyup:P,autocomplete:"category_name",autofocus:"",class:"mt-1 block w-full",required:"",type:"text",onBlur:o[4]||(o[4]=a=>m.value=[])},null,8,["modelValue"]),v(l("ul",L,[(i(!0),c(k,null,x(m.value,a=>(i(),c("li",{class:"hover:bg-blue-300 pl-3 py-1",onMousedown:h=>B(a.name)},U(a.name),41,R))),256))],512),[[b,m.value.length]]),t(u,{message:s(e).errors.category_name,class:"mt-2"},null,8,["message"])]),l("div",J,[t(d,{for:"brand_name",value:"Brand"}),t(p,{id:"brand_name",modelValue:s(e).brand_name,"onUpdate:modelValue":o[5]||(o[5]=a=>s(e).brand_name=a),onkeyup:T,autocomplete:"brand_name",autofocus:"",class:"mt-1 block w-full",required:"",type:"text",onBlur:o[6]||(o[6]=a=>m.value=[])},null,8,["modelValue"]),v(l("ul",O,[(i(!0),c(k,null,x(g.value,a=>(i(),c("li",{class:"hover:bg-blue-300 pl-3 py-1",onMousedown:h=>S(a.name)},U(a.name),41,G))),256))],512),[[b,g.value.length]]),t(u,{message:s(e).errors.category_name,class:"mt-2"},null,8,["message"])]),l("div",null,[t(d,{for:"price",value:"Price"}),t(p,{id:"price",modelValue:s(e).price,"onUpdate:modelValue":o[7]||(o[7]=a=>s(e).price=a),autocomplete:"price",autofocus:"",class:"mt-1 block w-full",required:"",type:"text",onKeypress:w},null,8,["modelValue"]),t(u,{message:s(e).errors.price,class:"mt-2"},null,8,["message"])]),l("div",null,[t(d,{for:"stock",value:"Stock"}),t(p,{id:"stock",modelValue:s(e).stock,"onUpdate:modelValue":o[8]||(o[8]=a=>s(e).stock=a),autocomplete:"stock",autofocus:"",class:"mt-1 block w-full",required:"",type:"text",onKeypress:w},null,8,["modelValue"]),t(u,{message:s(e).errors.stock,class:"mt-2"},null,8,["message"])])]),l("div",null,[t(d,{for:"image",value:"Please select an image"}),l("input",{id:"image",accept:"image/x-png, image/jpeg",class:"mt-2.5",name:"Product Image",type:"file",onInput:$},null,32),t(u,{message:s(e).errors.image,class:"mt-2"},null,8,["message"]),v(l("div",H,[l("img",{src:y.value,alt:"Product Image"},null,8,Q)],512),[[b,y.value]])]),l("div",W,[t(z,{disabled:s(e).processing},{default:V(()=>[D("Save")]),_:1},8,["disabled"]),t(N,{class:"transition ease-in-out","enter-from-class":"opacity-0","leave-to-class":"opacity-0"},{default:V(()=>[s(e).recentlySuccessful?(i(),c("p",X,"Saved.")):I("",!0)]),_:1}),t(u,{message:s(e).errors.app,class:"mt-2"},null,8,["message"])])])],32)]))}};export{le as default};
