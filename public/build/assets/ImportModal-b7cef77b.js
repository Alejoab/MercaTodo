import{r as p,h as F,p as C,o as s,g as P,w as _,b as e,j as S,a as n,u as i,c as o,k as f,t as d,F as c,f as m,e as V}from"./app-58c3ca15.js";import{_ as u}from"./InputError-dc24760a.js";import{_ as M}from"./Modal-aef6406a.js";import{P as N}from"./PrimaryButton-02a4193a.js";import"./_plugin-vue_export-helper-c27b6911.js";const T={class:"p-6"},j=e("h2",{class:"text-md font-semibold text-gray-900 mt-2 mb-5"}," Import Product Data ",-1),A=e("p",{class:"mt-1 text-sm text-gray-600"}," The file must contain the following fields: code, name, description, price, stock, category_name, brand_name and status. This file must be in CSV or XLSX format. ",-1),D=["onSubmit"],E={class:"my-auto"},L={key:0},X=e("div",{class:"dots-loading items-center inline-block"},[e("div"),e("div"),e("div")],-1),$=e("p",{class:"ml-2 inline-block align-middle"},"Importing",-1),q=[X,$],U={key:1},z={key:0,class:"bg-gray-100 rounded-md p-5 max-h-96 mt-3 overflow-auto"},G={class:"text-md font-semibold text-gray-900"},H={class:"space-y-7 mt-10"},J={class:"text-md font-semibold text-gray-900 mb-2"},K={class:"text-gray-600"},O={class:"px-8 mb-4"},Q={class:"text-md font-bold text-red-500 text-sm"},se={__name:"ImportModal",props:{show:{type:Boolean,required:!0}},emits:["close"],setup(h,{emit:g}){const l=p({}),t=p("pending"),v=()=>{g("close")},r=F({file:null}),x=a=>{r.file=a.target.files[0]},y=()=>{t.value="pending",l.value={},r.post(route("admin.products.import"),{onError:()=>{t.value=""}})},b=async()=>{const a=await axios.get(route("admin.products.import.check"));return a.data.length===0?(t.value="",!0):a.data.status==="Completed"?(a.data.data.length===0?t.value="All products have been imported successfully without any errors":(t.value="The following products have not been imported due to errors",l.value=a.data.data),!0):a.data.status==="Failed"?(t.value="An error has occurred in the data export. Please try again later",!0):!1};return C(()=>{b()}),(a,R)=>(s(),P(M,{show:h.show,onClose:v},{default:_(()=>[e("div",T,[j,A,e("form",{class:"flex justify-between bg-gray-100 rounded-md p-5 mt-7",onSubmit:S(y,["prevent"])},[e("div",E,[e("input",{id:"importFile",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",class:"file:p-2 file:border-none file:rounded-xl",name:"File Upload",type:"file",onInput:x},null,32),n(u,{message:i(r).errors.file,class:"mt-2"},null,8,["message"]),n(u,{message:i(r).errors.import,class:"mt-2"},null,8,["message"]),n(u,{message:i(r).errors.app,class:"mt-3"},null,8,["message"])]),t.value==="pending"?(s(),o("div",L,q)):(s(),o("div",U,[n(N,null,{default:_(()=>[f("Import")]),_:1})]))],40,D),t.value&&t.value!=="pending"?(s(),o("div",z,[e("h2",G,d(t.value),1),e("div",H,[(s(!0),o(c,null,m(l.value,(w,k)=>(s(),o("div",null,[e("h2",J,[f(" Product code: "),e("span",K,d(k),1)]),(s(!0),o(c,null,m(w,I=>(s(),o("ul",O,[(s(!0),o(c,null,m(I,B=>(s(),o("li",Q,d(B),1))),256))]))),256))]))),256))])])):V("",!0)])]),_:1},8,["show"]))}};export{se as default};
