import{r as m,J as o,o as r,c as n,b as e,d as k,v as I,i as M,F as _,f as b,a as d,w as c,u as l,e as p,g as P,O as B,t as u,n as N,k as x,m as U}from"./app-15dc6fea.js";import{i as H}from"./laravel-vue-pagination.es-3139b5b6.js";import{S as O}from"./SuccessButton-e5320fb6.js";import{D as E}from"./DangerButton-cda9e894.js";import{_ as q}from"./Modal-b6fb47e1.js";import{_ as j}from"./SecondaryButton-db5f17b8.js";import{_ as T}from"./Dropdown-735e5356.js";import F from"./ExportModal-9ee7cf10.js";import L from"./ImportModal-6772e0da.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./InputError-1f1c8eef.js";import"./PrimaryButton-29033063.js";const J={class:"flex flex-col lg:flex-row xl:pl-10 justify-between mt-5"},Q={class:"flex flex-col md:flex-row my-auto md:space-x-4 space-y-3 md:space-y-0 mx-auto"},R=e("option",{disabled:"",selected:"",value:""},"Select a Category",-1),G=["value"],K=e("option",{disabled:"",selected:"",value:""},"Select a Brand",-1),W=["value"],X={class:"w-full flex justify-between mt-5 lg:mt-0 px-10 lg:px-0"},Y={class:"my-auto"},Z=e("svg",{class:"h-8 w-8 text-black",fill:"none",height:"24",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"24"},[e("path",{d:"M0 0h24v24H0z",stroke:"none"}),e("circle",{cx:"10",cy:"10",r:"7"}),e("line",{x1:"21",x2:"15",y1:"21",y2:"15"})],-1),ee=[Z],te=e("svg",{class:"h-8 w-8 text-black",fill:"none",height:"24",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"24"},[e("path",{d:"M0 0h24v24H0z",stroke:"none"}),e("path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -5v5h5"}),e("path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 5v-5h-5"})],-1),se=[te],oe={class:"my-auto"},re=e("button",{class:"inline-flex transition ease-in-out duration-150 items-center bg-gray-800 px-3 py-1 rounded-xl"},[e("span",{class:"text-white font-semibold text-md"},"Actions"),e("svg",{class:"ml-1 h-5 w-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M19 9l-7 7-7-7","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"})])],-1),ne={class:"flex flex-col space-y-2"},ae=["href"],le={class:"mt-8"},ie={class:"overflow-auto"},de={class:"w-full text-xs md:text-sm text-left"},ce={class:"text-xs uppercase bg-gray-50"},ue=e("th",{class:"px-6 py-3",scope:"col"}," Code",-1),pe=e("th",{class:"px-6 py-3",scope:"col"}," Name",-1),he=e("th",{class:"px-6 py-3",scope:"col"}," Price",-1),ve=e("th",{class:"px-6 py-3",scope:"col"}," Stock",-1),me=e("th",{class:"px-6 py-3",scope:"col"}," Category",-1),ye=e("th",{class:"px-6 py-3",scope:"col"}," Brand",-1),_e=e("th",{class:"text-center",scope:"col"}," Status",-1),xe={key:0,class:"px-6 py-3",scope:"col"},ge={class:"bg-white border-b"},fe={class:"px-6 py-1.5 font-medium whitespace-nowrap",scope:"row"},we={class:"px-1 py-1.5"},ke={class:"px-4 py-1.5"},be={class:"px-4 py-1.5"},Ce={class:"px-4 py-1.5"},$e={class:"px-4 py-1.5"},Me={class:"px-4 py-1.5 text-center"},Pe={key:0,class:"text-center"},Be={class:"inline-flex space-x-1"},qe=e("svg",{class:"h-6 w-6 text-black",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{d:"M0 0h24v24H0z",stroke:"none"}),e("path",{d:"M9 7 h-3a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-3"}),e("path",{d:"M9 15h3l8.5 -8.5a1.5 1.5 0 0 0 -3 -3l-8.5 8.5v3"}),e("line",{x1:"16",x2:"19",y1:"5",y2:"8"})],-1),je=["onClick"],ze=U('<svg class="h-6 w-6 text-red-500" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" stroke="none"></path><line x1="4" x2="20" y1="7" y2="7"></line><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path></svg>',1),Ae=[ze],Se=["onClick"],De=e("svg",{class:"h-6 w-6 text-green-500",fill:"none",height:"24",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"24"},[e("path",{d:"M0 0h24v24H0z",stroke:"none"}),e("path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -5v5h5"}),e("path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 5v-5h-5"})],-1),Ve=[De],Ie={class:"mt-7 flex justify-center"},Ne={class:"p-6"},Ue=e("h2",{class:"text-lg font-medium text-gray-900"}," Are you sure you want to disable this product? ",-1),He=e("p",{class:"mt-1 text-sm text-gray-600"}," Once you disable this product the customers will not be able to access it. ",-1),Oe={class:"mt-6 flex justify-end"},Ee={class:"p-6"},Te=e("h2",{class:"text-lg font-medium text-gray-900"}," Are you sure you want to restore this product? ",-1),Fe=e("p",{class:"mt-1 text-sm text-gray-600"}," Once you restore this product the customers will have access to it again. ",-1),Le={class:"mt-6 flex justify-end"},ot={__name:"ProductsTable",props:{products:{type:Object,required:!0},categories:{type:Array,required:!0},brands:{type:Array,required:!0}},setup(y){const g=y,C=m(g.brands),h=m(""),v=m(""),f=m(!1),w=m(!1),i=m({page:o().props.ziggy.query.page?o().props.ziggy.query.page:1,search:o().props.ziggy.query.search?o().props.ziggy.query.search:"",category:o().props.ziggy.query.category?o().props.ziggy.query.category:"",brand:o().props.ziggy.query.brand?o().props.ziggy.query.brand:""}),$=async(a=1)=>{i.value.page=a,await B.visit(route("admin.products",i.value),{preserveScroll:!0,replace:!0})},z=async()=>{await B.visit(route("admin.products"),{preserveScroll:!0,replace:!0})},A=async()=>{const a=await fetch(route("brands",i.value.category));C.value=await a.json()},S=a=>{h.value="",axios.delete(route("admin.products.destroy",a)).then(()=>{const s=g.products.data.find(t=>t.id===a);s&&(s.status=s.status==="Active"?"Inactive":"Active")})},D=a=>{v.value="",axios.put(route("admin.products.restore",a)).then(()=>{const s=g.products.data.find(t=>t.id===a);s&&(s.status=s.status==="Active"?"Inactive":"Active")})};return(a,s)=>(r(),n(_,null,[e("div",null,[e("div",J,[e("div",Q,[e("div",null,[k(e("input",{id:"simple-search","onUpdate:modelValue":s[0]||(s[0]=t=>i.value.search=t),class:"bg-gray-50 border-gray-300 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-60 p-2.5",placeholder:"Search",type:"text"},null,512),[[I,i.value.search]])]),e("div",null,[k(e("select",{id:"category_name","onUpdate:modelValue":s[1]||(s[1]=t=>i.value.category=t),autocomplete:"category_name",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm w-60",onChange:s[2]||(s[2]=t=>{A(),i.value.brand=""})},[R,(r(!0),n(_,null,b(y.categories,t=>(r(),n("option",{value:t.id},u(t.name),9,G))),256))],544),[[M,i.value.category]])]),e("div",null,[k(e("select",{id:"brand_name","onUpdate:modelValue":s[3]||(s[3]=t=>i.value.brand=t),autocomplete:"brand_name",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm w-60"},[K,(r(!0),n(_,null,b(C.value,t=>(r(),n("option",{value:t.id},u(t.name),9,W))),256))],512),[[M,i.value.brand]])])]),e("div",X,[e("div",Y,[e("button",{class:"p-1 ml-2",onClick:s[4]||(s[4]=t=>$())},ee),e("button",{class:"p-1 ml-2",onClick:s[5]||(s[5]=t=>z())},se)]),e("div",oe,[d(T,{align:"right",width:"48"},{trigger:c(()=>[re]),content:c(()=>[e("div",ne,[l(o)().props.permissions.includes("Create")?(r(),n("a",{key:0,href:a.route("admin.products.create"),class:"text-start p-2 pl-3"},"Add Product",8,ae)):p("",!0),e("button",{class:"text-start p-2 pl-3",onClick:s[6]||(s[6]=t=>f.value=!0)},"Export Products "),l(o)().props.permissions.includes("Create")?(r(),n("button",{key:1,class:"text-start p-2 pl-3",onClick:s[7]||(s[7]=t=>w.value=!0)},"Import Products ")):p("",!0)])]),_:1})])])]),e("div",le,[e("div",ie,[e("table",de,[e("tr",ce,[ue,pe,he,ve,me,ye,_e,l(o)().props.permissions.includes("Update")||l(o)().props.permissions.includes("Delete")?(r(),n("th",xe)):p("",!0)]),e("tbody",null,[(r(!0),n(_,null,b(y.products.data,t=>(r(),n("tr",ge,[e("th",fe,u(t.code),1),e("td",we,u(t.name),1),e("td",ke," $ "+u(t.price),1),e("td",be,u(t.stock),1),e("td",Ce,u(t.category.name),1),e("td",$e,u(t.brand.name),1),e("td",Me,u(t.status),1),l(o)().props.permissions.includes("Update")||l(o)().props.permissions.includes("Delete")?(r(),n("td",Pe,[e("div",Be,[l(o)().props.permissions.includes("Update")?(r(),P(l(N),{key:0,href:a.route("admin.products.show",t.id)},{default:c(()=>[qe]),_:2},1032,["href"])):p("",!0),t.status==="Active"&&l(o)().props.permissions.includes("Delete")?(r(),n("button",{key:1,onClick:V=>h.value=t.id},Ae,8,je)):p("",!0),t.status!=="Active"&&l(o)().props.permissions.includes("Delete")?(r(),n("button",{key:2,onClick:V=>v.value=t.id},Ve,8,Se)):p("",!0)])])):p("",!0)]))),256))])])]),e("div",Ie,[d(l(H),{data:y.products,limit:1,keepLength:!0,onPaginationChangePage:$},null,8,["data"])])])]),d(q,{show:!!h.value,onClose:s[10]||(s[10]=t=>h.value="")},{default:c(()=>[e("div",Ne,[Ue,He,e("div",Oe,[d(j,{onClick:s[8]||(s[8]=t=>h.value="")},{default:c(()=>[x("Cancel")]),_:1}),d(E,{class:"ml-3",onClick:s[9]||(s[9]=t=>S(h.value))},{default:c(()=>[x(" Delete Product ")]),_:1})])])]),_:1},8,["show"]),d(q,{show:!!v.value,onClose:s[13]||(s[13]=t=>v.value="")},{default:c(()=>[e("div",Ee,[Te,Fe,e("div",Le,[d(j,{onClick:s[11]||(s[11]=t=>v.value="")},{default:c(()=>[x("Cancel")]),_:1}),d(O,{class:"ml-3",onClick:s[12]||(s[12]=t=>D(v.value))},{default:c(()=>[x(" Restore Product ")]),_:1})])])]),_:1},8,["show"]),d(F,{query:i.value,show:f.value,onClose:s[14]||(s[14]=t=>f.value=!1)},null,8,["query","show"]),l(o)().props.permissions.includes("Create")?(r(),P(L,{key:0,show:w.value,onClose:s[15]||(s[15]=t=>w.value=!1)},null,8,["show"])):p("",!0)],64))}};export{ot as default};
