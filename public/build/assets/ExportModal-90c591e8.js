import{_ as l}from"./InputError-dc24760a.js";import{_ as f}from"./Modal-aef6406a.js";import{P as h}from"./PrimaryButton-02a4193a.js";import{h as g,r as y,p as v,o as r,g as b,w as d,b as t,a as n,k as w,c as i,e as k,u}from"./app-58c3ca15.js";import"./_plugin-vue_export-helper-c27b6911.js";const E={class:"p-6"},q=t("h2",{class:"text-md font-semibold text-gray-900 mt-2 mb-5"}," Export Product Data ",-1),B=t("p",{class:"mt-1 text-sm text-gray-600"}," Exporting products will generate a XLSX file with all the filter products in your store. ",-1),P={class:"flex justify-between mt-6"},C={key:0,class:"flex items-center"},N=t("div",{class:"dots-loading flex items-center"},[t("div"),t("div"),t("div")],-1),V=t("p",{class:"ml-2 inline-block align-middle"},"Generating",-1),M=[N,V],j=["href"],O={__name:"ExportModal",props:{show:{type:Boolean,required:!0},query:{type:Object,required:!0}},emits:["close"],setup(c,{emit:p}){const a=c,s=g({search:a.query.search,category:a.query.category,brand:a.query.brand}),m=()=>{p("close")},e=y("pending"),_=()=>{e.value="pending",s.post(route("admin.products.export"),{onError:()=>{e.value=""}})},x=async()=>{const o=await axios.get(route("admin.products.exports.check"));return o.data.length===0?(e.value="",!0):o.data.status==="Completed"?(e.value=route("admin.products.export.download"),!0):o.data.status==="Failed"?(s.errors.export="Export failed. Please try again.",e.value="",!0):!1};return v(()=>{x()}),(o,D)=>(r(),b(f,{show:c.show,onClose:m},{default:d(()=>[t("div",E,[q,B,t("div",P,[n(h,{disabled:e.value==="pending",class:"disabled:bg-gray-500",onClick:_},{default:d(()=>[w("Export Products ")]),_:1},8,["disabled"]),e.value==="pending"?(r(),i("div",C,M)):e.value!==""?(r(),i("a",{key:1,href:e.value,class:"underline my-auto"},"Download Export",8,j)):k("",!0)]),n(l,{message:u(s).errors.export,class:"mt-3"},null,8,["message"]),n(l,{message:u(s).errors.app,class:"mt-3"},null,8,["message"])])]),_:1},8,["show"]))}};export{O as default};
